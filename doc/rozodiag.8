.\" Process this file with
.\" groff -man -Tascii rozodiag.8
.\"
.TH ROZODIAG 8 "FEBRUARY 2015" RozoFS "User Manuals"
.SH NAME
rozodiag \- RozoFS diagnostic tool
.SH SYNOPSIS
.B rozodiag
.I target
[
.I option
]
.B
.SH DESCRIPTION
.B rozodiag
is the diagnostic interface to the RozoFS processes.
.SH TARGET
.P 
[ -i <hostname|IP@> ] -p <port>
.P 
[ -i <hostname|IP@> ] -T <process>
.IP
A target is defined by its IP address or hostname and port it listens to for diagnostic requests.
The IP address or hostname can be omitted when targeting the local host. The destination TCP port
is mandatory and is either given explicitly thanks to 
.I -p <port>
, or implicitly thanks to
.I -T <process>. 
.IP
The 
.I <process> 
of the 
.I -T
option can take the following values depending on the targeted process:
   export                           (master exportd)
   export:<slave>                   (slave exportd)
   storaged                         (storaged)
   storio:<cid>                     (storio)
   mount:<mount instance>           (rozofsmount)
   mount:<mount instance>:<1|2>     (storcli of rozofsmount)
   geomgr                           (geomgr)
   geocli:<geocli instance>         (geocli)
   geocli:<geocli instance>:<1|2>   (storcli of geomgr)
   rebalancer[:<instance>]          (rebalancer)    

.SH OPTIONS
.IP "-h, --help"
.RS
Print help. 
.RE
.IP "-c cmdline"
.RS
.I cmdline
is the optional diagnostic command line. Several -c options can be set
in order to run several diagnostic commands in a run. 
When neither -c nor -f is set in the command, 
the rozodiag tools connects to the target in interactive mode.
.RE
.IP "-f cmdfile"
.RS
.I cmdfile 
is a file containing a diagnostic command per file line that the
rozodiag tool will run. 
When neither -c nor -f is set in the command, 
the rozodiag tools connects to the target in interactive mode.
.RE
.IP "-period seconds"
.RS
.I seconds
gives the periodicity in seconds to run the diagnostic commands given either
through the -c or the -f option. 
.RE
.\".SH ENVIRONMENT
.\".SH DIAGNOSTICS
.SH "REPORTING BUGS"
Report bugs to <bugs@fizians.org>.
.SH COPYRIGHT
Copyright (c) 2013 Fizians SAS. <http://www.fizians.com>

RozoFS is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published
by the Free Software Foundation, version 2.

RozoFS is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
.SH AUTHOR
Fizians <http://www.fizians.org>
.SH "SEE ALSO"
.BR rozofs (7),
